# Expected JSON Schema for Tailored Resumes

This document defines the expected JSON structure for tailored resumes generated by the LLM. All generated JSON must conform to this schema, which is enforced by Pydantic validation in `src/models.py`.

## Complete Schema

```json
{
  "contact_info": {
    "first_name": "string",
    "last_name": "string",
    "phone": "string",
    "email": "string",
    "location": "string",
    "linkedin_url": "string",
    "github_url": "string",
    "portfolio_url": "string (optional)"
  },
  "professional_summaries": [
    "Summary statement 1 (max 110 chars)",
    "Summary statement 2 (max 110 chars)",
    "Summary statement 3 (max 110 chars)"
  ],
  "work_authorization": "string",
  "education": [
    {
      "institution": "string",
      "degree": "string",
      "start_date": "string (e.g., 'Aug 2018')",
      "graduation_date": "string (e.g., 'May 2022')",
      "gpa": "string (optional, e.g., '3.8/4.0')"
    }
  ],
  "skills": {
    "Languages": "Comma-separated list (max 90 chars when joined)",
    "Frameworks": "Comma-separated list (max 90 chars when joined)",
    "Developer Tools": "Comma-separated list (max 90 chars when joined)",
    "Libraries": "Comma-separated list (max 90 chars when joined)"
  },
  "work_experience": [
    {
      "company": "string",
      "position": "string",
      "location": "string",
      "start_date": "string (e.g., 'Jan 2022')",
      "end_date": "string (e.g., 'Present' or 'Dec 2023')",
      "bullet_points": [
        "Bullet point 1 (max 110 chars)",
        "Bullet point 2 (max 110 chars)",
        "Bullet point 3 (max 110 chars)",
        "Bullet point 4 (max 110 chars)"
      ]
    }
  ],
  "projects": [
    {
      "project_name": "string",
      "technologies": ["Tech1", "Tech2", "Tech3"],
      "project_url": "string",
      "description": "string (optional)",
      "bullet_points": [
        "Bullet point 1 (max 110 chars)",
        "Bullet point 2 (max 110 chars)",
        "Bullet point 3 (max 110 chars)",
        "Bullet point 4 (max 110 chars)"
      ]
    }
  ]
}
```

## Critical Field Names

### ⚠️ IMPORTANT: Common Mistakes to Avoid

1. **Education Section**
   - ✅ CORRECT: `"graduation_date": "May 2022"`
   - ❌ WRONG: `"end_date": "May 2022"`
   - The template expects `graduation_date`, NOT `end_date`

2. **Project Technologies**
   - ✅ CORRECT: `"technologies": ["React", "Node.js", "MongoDB"]` (array of strings)
   - ❌ WRONG: `"technologies": "React, Node.js, MongoDB"` (comma-separated string)
   - ❌ WRONG: `"skills": ["React", "Node.js", "MongoDB"]` (wrong field name)
   - **CRITICAL:** Must be an array of strings, NOT a comma-separated string

3. **Work Experience End Date**
   - ✅ CORRECT: `"end_date": "Present"` or `"end_date": "Dec 2023"`
   - This field uses `end_date` (unlike education which uses `graduation_date`)

## Validation Rules

### Character Limits
- **Bullet Points**: Maximum 110 characters each
- **Technologies (when joined)**: Maximum 90 characters total
- **Skill Categories (when joined)**: Maximum 90 characters total

### Array Lengths
- **Professional Summaries**: Exactly 3 items
- **Bullet Points** (work experience & projects): Exactly 4 items per entry
- **Education**: At least 1 entry
- **Work Experience**: At least 1 entry
- **Projects**: At least 1 entry

### Required vs Optional Fields

#### Required Fields
- All fields in `contact_info` except `portfolio_url`
- All fields in `education` except `gpa`
- All fields in `work_experience`
- All fields in `projects` except `description`

#### Optional Fields
- `contact_info.portfolio_url`
- `education.gpa`
- `projects.description`

## Field Descriptions

### Contact Info
- **first_name**: Candidate's first name
- **last_name**: Candidate's last name
- **phone**: Phone number with country code (e.g., "+1 919-526-0631")
- **email**: Professional email address
- **location**: City, State format (e.g., "Raleigh, NC")
- **linkedin_url**: Full LinkedIn profile URL
- **github_url**: Full GitHub profile URL
- **portfolio_url**: Personal website/portfolio URL (optional)

### Professional Summaries
Array of 3 concise statements highlighting key qualifications and achievements. Each should be tailored to the job description.

### Work Authorization
Single string indicating work authorization status (e.g., "Authorized to work in the US for any employer")

### Education
Array of education entries, typically in reverse chronological order.
- **institution**: Full name of the educational institution
- **degree**: Degree type and major (e.g., "Bachelor of Science in Computer Science")
- **start_date**: Month and year started (e.g., "Aug 2018")
- **graduation_date**: Month and year graduated (e.g., "May 2022") - NOT "end_date"
- **gpa**: GPA in X.X/4.0 format (optional)

### Skills
Object with skill categories as keys and comma-separated skill lists as values. Common categories:
- Languages
- Frameworks
- Developer Tools
- Libraries

### Work Experience
Array of work experience entries in reverse chronological order.
- **company**: Company name
- **position**: Job title
- **location**: City, State or "Remote"
- **start_date**: Month and year started
- **end_date**: Month and year ended, or "Present" for current positions
- **bullet_points**: Array of exactly 4 achievement-focused bullet points

### Projects
Array of project entries showcasing relevant work.
- **project_name**: Name of the project
- **technologies**: Array of technologies used (will be displayed beside project name)
- **project_url**: Link to project (GitHub, live demo, etc.)
- **description**: Brief project description (optional)
- **bullet_points**: Array of exactly 4 bullet points describing the project

## Template Integration

The JSON structure maps directly to the Jinja2 template (`templates/resume.jinja2`):

### Education Section
```jinja2
\VAR{edu.institution} \hfill \VAR{edu.start_date|format_date} -- \VAR{edu.graduation_date|format_date}
```

### Projects Section
```jinja2
{\textbf{\VAR{project.project_name|latex_escape}}}\BLOCK{if project.technologies} | \VAR{project.technologies|join(', ')|latex_escape}\BLOCK{endif}
```

## Pydantic Validation

The schema is enforced by Pydantic models in `src/models.py`. When validation fails:
1. The pipeline halts immediately
2. Detailed error messages are displayed showing which fields failed validation
3. The invalid JSON is saved to `Resume_INVALID.json` for debugging
4. The error message indicates whether the issue is:
   - Missing required field
   - Wrong data type
   - Character limit exceeded
   - Array length mismatch

## Example Valid JSON

See `profile/master_resume.json` for a complete example of valid JSON structure.

## Troubleshooting

### Common Validation Errors

1. **"Field 'education -> 0 -> graduation_date': field required"**
   - Fix: Change `end_date` to `graduation_date` in education entries

2. **"Field 'projects -> 0 -> technologies': field required"**
   - Fix: Add technologies array to project entries

3. **"Field 'work_experience -> 0 -> bullet_points': ensure this value has at least 4 items"**
   - Fix: Ensure exactly 4 bullet points per work experience entry

4. **"String should have at most 110 characters"**
   - Fix: Shorten the bullet point to 110 characters or less

## Version History

- **v1.0** (2025-01-19): Initial schema documentation
  - Defined complete JSON structure
  - Added validation rules and character limits
  - Documented critical field name requirements
